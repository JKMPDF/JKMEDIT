<!DOCTYPE html>
<html lang='en' data-theme='corporate-blue'>
<head>
    <meta charset='UTF-8'/>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'/>
<title>Advanced Online Notepad - JKM Edit</title>
<meta name="description" content="A free, advanced online notepad with multi-note support, PDF export, and rich text editing. All notes are saved locally in your browser."/>
<meta name="keywords" content="online notepad, local notepad, free notepad, rich text editor, pdf export, web notepad, jkm edit"/>
<meta name="author" content="JKM Edit"/>
<meta name="robots" content="index, follow"/>
<meta name="google-site-verification" content="Ro_iz55zO9NB6h6tSokRnkEdbj5Z8MQN1Ig6Yrmmh88" />
<meta name="google-adsense-account" content="ca-pub-7398521559513676">
<link rel="canonical" href="https://jkmpdf.github.io/JKMEDIT/Utilities/notepad.html"/>
<meta property="og:title" content="Advanced Online Notepad - JKM Edit"/>
<meta property="og:description" content="A free, advanced online notepad with PDF export, and rich text editing. All notes are saved locally."/>
<meta property="og:type" content="website"/>
<meta property="og:url" content="https://jkmpdf.github.io/JKMEDIT/Utilities/notepad.html"/>
<meta property="og:image" content="https://jkmpdf.github.io/JKMEDIT/assets/og-preview-image.png"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:title" content="Advanced Online Notepad - JKM Edit"/>
<meta name="twitter:description" content="A free, advanced online notepad with PDF export, and rich text editing. All notes are saved locally."/>
<meta name="twitter:image" content="https://jkmpdf.github.io/JKMEDIT/assets/og-preview-image.png"/>
<link rel="icon" type="image/png" href="../assets/jkm-edit-logo.png">

<script>
    (function() {
        try {
            const theme = localStorage.getItem('jkm-edit-theme') || 'corporate-blue';
            document.documentElement.setAttribute('data-theme', theme);
            const mode = localStorage.getItem('jkm-edit-mode');
            if (mode === 'dark') {
                document.documentElement.classList.add('dark-mode');
            }
        } catch (e) {}
    })();
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<link href='https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap' rel='stylesheet'/>
<link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css' rel='stylesheet'/>

<style>
    /* --- Basic Setup & Variables --- */
    :root { font-family: 'Poppins', sans-serif; --transition-speed: 0.3s; }
    body { margin: 0; background-color: var(--bg-color); color: var(--text-color); transition: background-color var(--transition-speed), color var(--transition-speed); }
    *, *::before, *::after { box-sizing: border-box; }

    /* --- THEME DEFINITIONS --- */
    [data-theme='corporate-blue'] { --primary-color: #0052cc; --secondary-color: #0747a6; --bg-color: #f4f5f7; --surface-color: #ffffff; --text-color: #172b4d; --accent-color: #ffab00; --gradient: linear-gradient(45deg, var(--primary-color), #0065ff); }
    [data-theme='forest-green'] { --primary-color: #28a745; --secondary-color: #218838; --bg-color: #f0f3f2; --surface-color: #ffffff; --text-color: #343a40; --accent-color: #ffc107; --gradient: linear-gradient(45deg, var(--primary-color), #34d058); }
    [data-theme='sunset-gradient'] { --primary-color: #fd7e14; --secondary-color: #e65100; --bg-color: #fff8f2; --surface-color: #ffffff; --text-color: #492b0e; --accent-color: #20c997; --gradient: linear-gradient(45deg, #ff4e50, #f9d423); }
    [data-theme='tech-noir'] { --primary-color: #e83e8c; --secondary-color: #d81b60; --bg-color: #1a1a2e; --surface-color: #242444; --text-color: #e0e0e0; --accent-color: #00bcd4; --gradient: linear-linear-gradient(45deg, #4a00e0, #8e2de2); }
    [data-theme='minty-fresh'] { --primary-color: #1abc9c; --secondary-color: #16a085; --bg-color: #f1fefb; --surface-color: #ffffff; --text-color: #3d524d; --accent-color: #f39c12; --gradient: linear-gradient(45deg, #1abc9c, #1dd3b0); }
    [data-theme='royal-purple'] { --primary-color: #6f42c1; --secondary-color: #5a32a3; --bg-color: #f8f7fa; --surface-color: #ffffff; --text-color: #343a40; --accent-color: #fd7e14; --gradient: linear-gradient(45deg, #6f42c1, #8a5fd6); }
    [data-theme='graphite-gray'] { --primary-color: #6c757d; --secondary-color: #5a6268; --bg-color: #e9ecef; --surface-color: #f8f9fa; --text-color: #212529; --accent-color: #007bff; --gradient: linear-gradient(45deg, #6c757d, #adb5bd); }
    [data-theme='crimson-red'] { --primary-color: #dc3545; --secondary-color: #c82333; --bg-color: #fdf5f6; --surface-color: #ffffff; --text-color: #343a40; --accent-color: #ffc107; --gradient: linear-gradient(45deg, #dc3545, #f05a68); }

    /* --- DARK MODE --- */
    html.dark-mode { --bg-color: #121212; --surface-color: #1e1e1e; --text-color: #e0e0e0; }
    html.dark-mode[data-theme='tech-noir'] { --bg-color: #0f0f1e; --surface-color: #1a1a2e; }
    html.dark-mode[data-theme='corporate-blue'] { --text-color: #d0d5dd; }

    /* --- Header & Navigation --- */
    .main-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; background: var(--surface-color); box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-bottom: 3px solid var(--primary-color); transition: background-color var(--transition-speed), color var(--transition-speed); z-index: 100; position: relative; }
    .logo-container { display: flex; align-items: center; gap: 0.75rem; }
    .site-logo { height: 2rem; width: auto; transition: transform var(--transition-speed); }
    .site-logo:hover { transform: scale(1.05); }
    .logo-container h1 { font-size: 1.75rem; font-weight: 700; margin: 0; color: var(--text-color); }
    .main-nav { display: flex; align-items: center; gap: 1.5rem; }
    .theme-selector { display: flex; align-items: center; gap: 0.5rem; }
    #theme-picker { padding: 0.25rem 0.5rem; border-radius: 5px; border: 1px solid var(--primary-color); background: var(--surface-color); color: var(--text-color); font-family: 'Poppins', sans-serif; }
    #dark-mode-toggle { background: none; border: none; cursor: pointer; font-size: 1.25rem; color: var(--text-color); padding: 0.5rem; }
    #dark-mode-toggle .fa-sun { display: none; }
    html.dark-mode #dark-mode-toggle .fa-sun { display: inline; }
    html.dark-mode #dark-mode-toggle .fa-moon { display: none; }
    .tool-nav { display: flex; gap: 1rem; margin-left: 2rem; }
    .tool-nav-item { position: relative; }
    .tool-nav-button { background: none; border: none; color: var(--text-color); font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 1rem; cursor: pointer; padding: 0.5rem 0.75rem; border-radius: 4px; transition: all var(--transition-speed); }
    .tool-nav-button:hover { color: var(--primary-color); background-color: color-mix(in srgb, var(--primary-color) 10%, transparent); }
    .tool-dropdown { position: absolute; top: 100%; left: 0; background-color: var(--surface-color); box-shadow: 0 5px 15px rgba(0,0,0,0.1); border-radius: 0 0 8px 8px; min-width: 200px; display: none; z-index: 1000; padding: 0.5rem 0; border-top: 2px solid var(--primary-color); }
    .tool-nav-item:hover .tool-dropdown { display: block; }
    .tool-dropdown a { display: block; padding: 0.5rem 1rem; color: var(--text-color); text-decoration: none; transition: background-color var(--transition-speed); }
    .tool-dropdown a:hover { background-color: color-mix(in srgb, var(--primary-color) 10%, transparent); }
    .auth-button { padding: 0.5rem 1rem; border-radius: 4px; font-weight: 600; cursor: pointer; transition: all var(--transition-speed); }
    .login-button { background: none; border: 1px solid var(--primary-color); color: var(--primary-color); }
    .login-button:hover { background-color: var(--primary-color); color: white; }

    /* --- Main Dashboard & Content Area --- */
    .dashboard-container { padding: 2rem 4rem; max-width: 1400px; margin: auto; }
    .dashboard-header { text-align: center; margin-bottom: 3rem; }
    .dashboard-header h2 { font-size: 2.5rem; margin-bottom: 0.5rem; }
    .dashboard-header p { font-size: 1.1rem; color: #6c757d; }
    html.dark-mode .dashboard-header p { color: #a0a0a0; }
    
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideIn { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    
    /* --- Responsive Design (Simplified) --- */
    @media (max-width: 1024px) {
        .main-header { flex-direction: column; gap: 1rem; padding: 1rem; }
        .tool-nav { margin-left: 0; flex-wrap: wrap; justify-content: center; }
        .dashboard-container { padding: 2rem 1.5rem; }
    }
    @media (max-width: 768px) {
        .main-nav { flex-wrap: wrap; justify-content: center; }
        .tool-nav { gap: 0.5rem; }
        .tool-nav-button { font-size: 0.9rem; padding: 0.4rem 0.6rem; }
    }

    /* ============================================== */
    /* --- ADVANCED NOTEPAD STYLES (LOCAL) --- */
    /* ============================================== */
    
    /* --- App Layout --- */
    #notepad-app {
        display: none;
        height: 75vh;
        min-height: 600px;
        background: var(--surface-color);
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        border: 1px solid color-mix(in srgb, var(--bg-color) 80%, var(--text-color) 20%);
        overflow: hidden;
    }

    /* --- Sidebar --- */
    .notepad-sidebar {
        width: 300px;
        background-color: color-mix(in srgb, var(--bg-color) 90%, var(--text-color) 10%);
        border-right: 1px solid color-mix(in srgb, var(--bg-color) 80%, var(--text-color) 20%);
        display: flex;
        flex-direction: column;
    }
    .sidebar-header {
        padding: 1rem;
        border-bottom: 1px solid color-mix(in srgb, var(--bg-color) 80%, var(--text-color) 20%);
    }
    .sidebar-header #new-note-btn {
        width: 100%;
        padding: 0.75rem;
        font-size: 1rem;
        background-color: var(--primary-color);
        border: 1px solid var(--primary-color);
        color: white;
        border-radius: 4px;
        font-weight: 600;
        cursor: pointer;
        transition: all var(--transition-speed);
    }
    .sidebar-header #new-note-btn:hover {
        background-color: var(--secondary-color);
        border-color: var(--secondary-color);
    }
    .sidebar-search {
        padding: 1rem;
        border-bottom: 1px solid color-mix(in srgb, var(--bg-color) 80%, var(--text-color) 20%);
    }
    #search-notes-input {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid color-mix(in srgb, var(--bg-color) 80%, var(--text-color) 20%);
        border-radius: 4px;
        background-color: var(--bg-color);
        color: var(--text-color);
        font-size: 0.9rem;
    }
    .note-list-container {
        flex: 1;
        overflow-y: auto;
    }
    .note-list-item {
        padding: 1rem;
        border-bottom: 1px solid color-mix(in srgb, var(--bg-color) 80%, var(--text-color) 20%);
        cursor: pointer;
        transition: background-color var(--transition-speed);
        position: relative;
        display: flex;
        align-items: center;
        min-height: 50px;
    }
    .note-list-item:hover {
        background-color: color-mix(in srgb, var(--primary-color) 10%, transparent);
    }
    .note-list-item.active {
        background-color: color-mix(in srgb, var(--primary-color) 20%, transparent);
        border-left: 4px solid var(--primary-color);
        padding-left: calc(1rem - 4px);
    }
    .note-list-title {
        font-weight: 600;
        color: var(--text-color);
        display: block;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        flex: 1;
        margin-right: 1.5rem;
    }
    .note-delete-btn {
        position: absolute;
        top: 50%;
        right: 0.5rem;
        transform: translateY(-50%);
        background: none;
        border: none;
        color: #aaa;
        font-size: 0.9rem;
        cursor: pointer;
        padding: 0.25rem;
        border-radius: 3px;
    }
    .note-delete-btn:hover {
        color: var(--primary-color);
        background-color: color-mix(in srgb, var(--primary-color) 15%, transparent);
    }

    /* --- Main Editor Area --- */
    .notepad-main {
        flex: 1;
        display: flex;
        flex-direction: column;
    }
    .notepad-toolbar {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        padding: 0.75rem 1rem;
        background-color: color-mix(in srgb, var(--bg-color) 90%, var(--text-color) 10%);
        border-bottom: 1px solid color-mix(in srgb, var(--bg-color) 80%, var(--text-color) 20%);
    }
    .toolbar-button, .toolbar-select {
        background: var(--surface-color);
        border: 1px solid color-mix(in srgb, var(--bg-color) 80%, var(--text-color) 20%);
        color: var(--text-color);
        cursor: pointer;
        padding: 0.5rem 0.75rem;
        border-radius: 5px;
        transition: all 0.2s;
        font-size: 0.9rem;
        font-family: 'Poppins', sans-serif;
    }
    .toolbar-button:hover {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
    }
    .toolbar-button.active {
        background-color: color-mix(in srgb, var(--primary-color) 20%, transparent);
        color: var(--primary-color);
    }
    .toolbar-group { display: flex; gap: 0.5rem; align-items: center; }
    .toolbar-separator { border-left: 1px solid #ccc; height: 25px; margin: 0 0.5rem; }

    .toolbar-color-picker {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        width: 28px;
        height: 28px;
        padding: 0;
        border: 1px solid color-mix(in srgb, var(--bg-color) 80%, var(--text-color) 20%);
        border-radius: 5px;
        cursor: pointer;
        background-color: var(--surface-color);
        transition: border-color 0.2s;
    }
    .toolbar-color-picker:hover {
        border-color: var(--primary-color);
    }
    .toolbar-color-picker::-webkit-color-swatch {
        border: none;
        border-radius: 4px;
        padding: 3px;
    }
    .toolbar-color-picker::-moz-color-swatch {
        border: none;
        border-radius: 4px;
        padding: 3px;
    }

    .editor-header {
        padding: 1rem;
        border-bottom: 1px solid color-mix(in srgb, var(--bg-color) 80%, var(--text-color) 20%);
    }
    #note-title-input {
        width: 100%;
        border: none;
        outline: none;
        font-size: 1.75rem;
        font-weight: 600;
        padding: 0.5rem;
        background: var(--surface-color);
        color: var(--text-color);
    }
    #note-title-input::placeholder { color: #aaa; }

    .editor-container {
        flex: 1;
        overflow-y: auto;
    }
    #notepad-editor {
        height: 100%;
        padding: 1.5rem;
        outline: none;
        line-height: 1.6;
        font-size: 1rem;
        font-family: 'Poppins', sans-serif;
        color: var(--text-color);
        background: var(--surface-color);
    }
    #notepad-editor[contenteditable="true"]:empty:before {
        content: "Start writing...";
        color: #aaa;
        pointer-events: none;
    }
    
    .notepad-stats {
        padding: 0.5rem 1rem;
        background-color: color-mix(in srgb, var(--bg-color) 90%, var(--text-color) 10%);
        font-size: 0.85rem;
        color: #6c757d;
        border-top: 1px solid color-mix(in srgb, var(--bg-color) 80%, var(--text-color) 20%);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    html.dark-mode .notepad-stats { color: #a0a0a0; }
    #save-status {
        font-weight: 600;
        color: var(--primary-color);
    }
    .stats-group-left { flex-shrink: 0; }
    .stats-group-right { display: flex; gap: 0.5rem; flex-shrink: 0; }
    .pdf-button {
        font-size: 0.8rem !important; 
        padding: 0.3rem 0.6rem !important;
        background-color: #dc3545;
        border-color: #dc3545;
        color: white;
    }
    .pdf-button:hover {
        background-color: #c82333;
        border-color: #c82333;
        color: white;
    }

    /* --- Responsive for App --- */
    @media (max-width: 768px) {
        .dashboard-container { padding: 1rem; }
        #notepad-app {
            flex-direction: column;
            height: 90vh;
        }
        .notepad-sidebar {
            width: 100%;
            height: 250px;
            border-right: none;
            border-bottom: 1px solid color-mix(in srgb, var(--bg-color) 80%, var(--text-color) 20%);
        }
        .sidebar-header, .sidebar-search { padding: 0.5rem; }
        .note-list-item { padding: 0.5rem; }
        .notepad-main {
            height: calc(100% - 250px);
        }
        .notepad-toolbar { padding: 0.5rem; }
        .toolbar-button, .toolbar-select { padding: 0.4rem 0.6rem; font-size: 0.8rem; }
        .editor-header { padding: 0.5rem; }
        #note-title-input { font-size: 1.25rem; }
        #notepad-editor { padding: 1rem; }
    }

</style>
</head>
<body>
    <header class='main-header'>
        <div style="display: flex; align-items: center;">
            <div class='logo-container'>
                <a href='../index.html' style='text-decoration: none; color: inherit; display: flex; align-items: center; gap: 0.75rem;'>
                    <img src='../assets/jkm-edit-logo.png' alt='JKM Edit Logo' class='site-logo'>
                    <h1>JKM Edit - By M&M</h1>
                </a>
            </div>
    <nav class='tool-nav'>
        <div class='tool-nav-item'>
            <button class='tool-nav-button'>PDF Tools</button>
            <div class='tool-dropdown'>
                <a href='../Pdf-tools/merge-pdf.html'>Merge PDF</a>
                <a href='../Pdf-tools/split-pdf.html'>Split PDF</a>
                <a href='../Pdf-tools/compress-pdf.html'>Compress PDF</a>
                <a href='../Pdf-tools/pdf-to-ocr-word.html'>PDF to Word</a>
                <a href='../Pdf-tools/pdf-to-powerpoint.html'>PDF to Power Point</a>
                <a href='../Pdf-tools/pdf-to-excel.html'>PDF to Excel</a>
                <a href='../Pdf-tools/pdf-to-image.html'>PDF to JPG/PNG</a>
                <a href='../Pdf-tools/word-to-pdf.html'>Word to PDF</a>
                <a href='../pdf-tools.html#function9'>Powerpoint to PDF</a>
                <a href='../Pdf-tools/excel-to-pdf.html'>Excel to PDF</a>
                <a href='../Pdf-tools/image-to-pdf.html'>JPG/PNG to PDF</a>
                <a href='../Pdf-tools/sign-pdf.html'>Sign PDF</a>
                <a href='../Pdf-tools/add-page-numbers.html'>Add Page Numbers</a>
                <a href='../Pdf-tools/rotate-pdf.html'>Rotate PDF</a>
                <a href='../Pdf-tools/protect-pdf.html'>Protect PDF</a>
            </div>
        </div>
        
        <div class='tool-nav-item'>
            <button class='tool-nav-button'>Video Tools</button>
            <div class='tool-dropdown'>
                <a href='../Video-Tools.html#function1'>Trim/Cut Video</a>
                <a href='../Video-Tools.html#function2'>Merge Video</a>
                <a href='../Video-Tools.html#function3'>Video to MP3</a>
                <a href='../Video-Tools.html#function4'>Video Compressor</a>
                <a href='../Video-Tools.html#function5'>Video to GIF Convertor</a>
                <a href='../Video-Tools.html#function6'>Add Subtitles to Video</a>
                <a href='../Video-Tools.html#function7'>Change Video Speed</a>
                <a href='../Video-Tools.html#function8'>Video to Image Frames</a>
                <a href='../Video-Tools.html#function9'>Other Tools</a>
            </div>
        </div>
        
        <div class='tool-nav-item'>
            <button class='tool-nav-button'>Files Tools</button>
            <div class='tool-dropdown'>
                <a href='../File-Tools.html#function1'>File Convertor</a>
                <a href='../File-Tools.html#function2'>ZIP/RAR Creator & Extrator</a>
                <a href='../File-Tools.html#function3'>File Splitter & Joiner</a>
                <a href='../File-Tools.html#function4'>Batch Rename File</a>
                <a href='../File-Tools.html#function5'>File Size Reducer</a>
                <a href='../File-Tools.html#function6'>Secure File Share</a>
            </div>
        </div>
        
        <div class='tool-nav-item'>
            <button class='tool-nav-button'>Utilities</button>
            <div class='tool-dropdown'>
                <a href='../Utilities/Text-Case-Converter.html'>Text Case Converter</a>
                <a href='../Utilities/Income-Expenses-Tracker.html'>Income & Expenses Tracker</a>
                <a href='../Utilities/Calculator.html'>Calculator</a>
                <a href='../Utilities/qr-code-generator.html'>QR Code Generator & Extrater</a>
                <a href='../Utilities.html#function5'>Barcode Generator</a>
                <a href='../Utilities/currency-converter.html'>Currency Converter</a>
                <a href='notepad.html'>Online Notepad</a> <a href='../Utilities.html#function8'>Screen Recoder</a>
                <a href='../Utilities.html#function9'>Unit Converter</a>
            </div>
        </div>
    </nav></div><nav class='main-nav'>
    <div class='theme-selector'>
        <label for='theme-picker'>Theme:</label>
        <select id='theme-picker'>
            <option value='corporate-blue' selected='selected'>Corporate Blue</option>
            <option value='forest-green'>Forest Green</option>
            <option value='sunset-gradient'>Sunset Gradient</option>
            <option value='tech-noir'>Tech Noir</option>
            <option value='minty-fresh'>Minty Fresh</option>
            <option value='royal-purple'>Royal Purple</option>
            <option value='graphite-gray'>Graphite Gray</option>
            <option value='crimson-red'>Crimson Red</option>
        </select>
    </div>
    <button id='dark-mode-toggle' class='nav-button' aria-label='Toggle Dark Mode'>
        <i class='fa-solid fa-moon'></i><i class='fa-solid fa-sun'></i>
    </button>
</nav>
  
</header>
<main class='dashboard-container'>
    <div class='dashboard-header' style='text-align: left; margin-bottom: 2rem; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;'>
        <div>
            <h2 style='margin: 0;'>Advanced Online Notepad</h2>
            <p style='margin: 0; font-size: 1.1rem; color: #6c757d;'>Notes saved to browser. Supports text formatting, colors, & PDF export.</p>
        </div>
        <a href='../index.html' class='auth-button login-button' style='text-decoration: none;'>
            <i class='fa-solid fa-arrow-left'></i> Back to All Tools
        </a>
    </div>

    <div id="notepad-app">
        <aside class="notepad-sidebar">
            <div class="sidebar-header">
                <button id="new-note-btn"><i class="fa-solid fa-plus"></i> Create New Note</button>
            </div>
            <div class="sidebar-search">
                <input type="text" id="search-notes-input" placeholder="Search notes...">
            </div>
            <div id="note-list-container" class="note-list-container">
                </div>
        </aside>

        <main class="notepad-main">
            <div class="notepad-toolbar">
                <div class="toolbar-group">
                    <select id="format-block-select" class="toolbar-select">
                        <option value="p">Paragraph</option>
                        <option value="h1">Heading 1</option>
                        <option value="h2">Heading 2</option>
                        <option value="h3">Heading 3</option>
                    </select>
                </div>
                <span class="toolbar-separator"></span>
                <div class="toolbar-group">
                    <button class="toolbar-button" data-command="bold" title="Bold"><i class="fa-solid fa-bold"></i></button>
                    <button class="toolbar-button" data-command="italic" title="Italic"><i class="fa-solid fa-italic"></i></button>
                    <button class="toolbar-button" data-command="underline" title="Underline"><i class="fa-solid fa-underline"></i></button>
                    <button class="toolbar-button" data-command="strikeThrough" title="Strikethrough"><i class="fa-solid fa-strikethrough"></i></button>
                    <input type="color" id="font-color-picker" class="toolbar-color-picker" title="Font Color" value="#172b4d">
                </div>
                <span class="toolbar-separator"></span>
                <div class="toolbar-group">
                    <button class="toolbar-button" data-command="justifyLeft" title="Align Left"><i class="fa-solid fa-align-left"></i></button>
                    <button class="toolbar-button" data-command="justifyCenter" title="Align Center"><i class="fa-solid fa-align-center"></i></button>
                    <button class="toolbar-button" data-command="justifyRight" title="Align Right"><i class="fa-solid fa-align-right"></i></button>
                </div>
                <span class="toolbar-separator"></span>
                <div class="toolbar-group">
                    <button class="toolbar-button" data-command="undo" title="Undo"><i class="fa-solid fa-undo"></i></button>
                    <button class="toolbar-button" data-command="redo" title="Redo"><i class="fa-solid fa-redo"></i></button>
                </div>
                <span class="toolbar-separator"></span>
                <div class="toolbar-group">
                    <button class="toolbar-button" data-command="insertUnorderedList" title="Unordered List"><i class="fa-solid fa-list-ul"></i></button>
                    <button class="toolbar-button" data-command="insertOrderedList" title="Ordered List"><i class="fa-solid fa-list-ol"></i></button>
                    <button class="toolbar-button" data-command="formatBlock" data-value="blockquote" title="Blockquote"><i class="fa-solid fa-quote-right"></i></button>
                    <button class="toolbar-button" data-command="formatBlock" data-value="pre" title="Code Block"><i class="fa-solid fa-code"></i></button>
                </div>
                <span class="toolbar-separator"></span>
                <div class="toolbar-group">
                    <button class="toolbar-button" id="create-link-btn" title="Create Link"><i class="fa-solid fa-link"></i></button>
                    <button class="toolbar-button" data-command="removeFormat" title="Clear Formatting"><i class="fa-solid fa-eraser"></i></button>
                </div>
            </div>

            <div class="editor-header">
                <input type="text" id="note-title-input" placeholder="Note Title...">
            </div>

            <div class="editor-container">
                <div id="notepad-editor" contenteditable="true" spellcheck="true">
                    </div>
            </div>

            <div class="notepad-stats">
                <div class="stats-group-left">
                    <span id="word-count">Words: 0</span> | 
                    <span id="char-count">Characters: 0</span>
                    <span id="save-status" style="margin-left: 1rem;"></span>
                </div>
                <div class="stats-group-right">
                    <button id="save-txt-btn" class="toolbar-button" style="font-size: 0.8rem; padding: 0.3rem 0.6rem;"><i class="fa-solid fa-download"></i> .txt</button>
                    <button id="save-html-btn" class="toolbar-button" style="font-size: 0.8rem; padding: 0.3rem 0.6rem;"><i class="fa-solid fa-code"></i> .html</button>
                    <button id="save-pdf-btn" class="toolbar-button pdf-button"><i class="fa-solid fa-file-pdf"></i> .pdf</button>
                </div>
            </div>
        </main>
    </div>
</main>
<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- Theme and Dark Mode Event Listeners ---
    const themePicker = document.getElementById('theme-picker');
    const darkModeToggle = document.getElementById('dark-mode-toggle');
    const htmlElement = document.documentElement;

    const setTheme = (theme) => {
        htmlElement.dataset.theme = theme;
        localStorage.setItem('jkm-edit-theme', theme);
    };
    const enableDarkMode = () => {
        htmlElement.classList.add('dark-mode');
        localStorage.setItem('jkm-edit-mode', 'dark');
    };
    const disableDarkMode = () => {
        htmlElement.classList.remove('dark-mode');
        localStorage.setItem('jkm-edit-mode', 'light');
    };
    themePicker.addEventListener('change', () => setTheme(themePicker.value));
    darkModeToggle.addEventListener('click', () => {
        htmlElement.classList.contains('dark-mode') ? disableDarkMode() : enableDarkMode();
    });
    const savedTheme = localStorage.getItem('jkm-edit-theme');
    if (savedTheme) {
        themePicker.value = savedTheme;
    }

    // ==============================================
    // === LOCAL-STORAGE NOTEPAD SCRIPT ===
    // ==============================================
    
    const notepadApp = document.getElementById('notepad-app');
    if (!notepadApp) return;
    
    notepadApp.style.display = 'flex';

    // Global state
    let currentNoteId = null;
    let allNotes = [];
    let noteSaveTimer = null;
    const NOTES_STORAGE_KEY = 'jkm-edit-all-notes';
    
    const { jsPDF } = window.jspdf;

    // UI elements
    const editor = document.getElementById('notepad-editor');
    const noteTitleInput = document.getElementById('note-title-input');
    const noteListContainer = document.getElementById('note-list-container');
    const newNoteBtn = document.getElementById('new-note-btn');
    const searchInput = document.getElementById('search-notes-input');
    const saveStatus = document.getElementById('save-status');
    const wordCountEl = document.getElementById('word-count');
    const charCountEl = document.getElementById('char-count');
    const savePdfBtn = document.getElementById('save-pdf-btn');
    const fontColorPicker = document.getElementById('font-color-picker');
    // Image elements removed


    // Helper: Debounce
    const debounce = (func, delay) => {
        return (...args) => {
            clearTimeout(noteSaveTimer);
            saveStatus.textContent = 'Saving...';
            noteSaveTimer = setTimeout(() => {
                func.apply(this, args);
            }, delay);
        };
    };

    // Helper: Format date
    const formatDate = (isoString) => {
        if (!isoString) return '...';
        return new Date(isoString).toLocaleString();
    };

    // Helper: Generate unique ID
    const generateId = () => `note-${Date.now()}`;

    // 1. Save all notes to localStorage
    const saveNotesToLocal = () => {
        try {
            localStorage.setItem(NOTES_STORAGE_KEY, JSON.stringify(allNotes));
            saveStatus.textContent = 'All changes saved.';
        } catch (e) {
            console.error("Error saving to localStorage", e);
            saveStatus.textContent = 'Error saving!';
        }
    };

    // 2. Load all notes from localStorage
    const loadNotesFromLocal = () => {
        const notesString = localStorage.getItem(NOTES_STORAGE_KEY);
        if (notesString) {
            try {
                allNotes = JSON.parse(notesString);
            } catch (e) {
                allNotes = [];
            }
        }
        
        if (allNotes.length === 0) {
            // Updated default note
            const firstNote = {
                id: generateId(),
                title: "My First Note",
                content: "Welcome! You can change <b>text colors</b>, create <b>lists</b>, and export as <b>.txt</b>, <b>.html</b>, or <b>.pdf</b>!",
                updatedAt: new Date().toISOString()
            };
            allNotes = [firstNote];
            saveNotesToLocal();
        }
        
        allNotes.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));
    };

    // 3. Render all notes in the sidebar
    const renderNoteList = () => {
        noteListContainer.innerHTML = '';
        if(allNotes.length === 0) {
            noteListContainer.innerHTML = '<p style="padding: 1rem; text-align: center; color: #888;">No notes yet.</p>';
            return;
        }
        allNotes.forEach(renderNoteInList);
    };

    // 4. Render a single note in the sidebar (FIXED)
    const renderNoteInList = (note) => {
        const item = document.createElement('div');
        item.classList.add('note-list-item');
        item.dataset.id = note.id;
        
        // --- UPDATED: Only shows title ---
        item.innerHTML = `
            <button class="note-delete-btn" title="Delete Note">&times;</button>
            <span class="note-list-title">${note.title || 'Untitled Note'}</span>
        `;
        
        item.addEventListener('click', (e) => {
            if (e.target.classList.contains('note-delete-btn')) return;
            loadNote(note.id);
        });

        item.querySelector('.note-delete-btn').addEventListener('click', (e) => {
            e.stopPropagation();
            deleteNote(note.id, note.title);
        });
        
        noteListContainer.appendChild(item);
    };
    
    // 5. Load a note into the editor
    const loadNote = (noteId) => {
        if (currentNoteId === noteId) return;
        
        const note = allNotes.find(n => n.id === noteId);
        if (!note) return;
        
        if (currentNoteId) {
            const oldActive = document.querySelector(`.note-list-item[data-id="${currentNoteId}"]`);
            if(oldActive) oldActive.classList.remove('active');
        }
        const newActive = document.querySelector(`.note-list-item[data-id="${noteId}"]`);
        if(newActive) newActive.classList.add('active');
        
        currentNoteId = noteId;
        noteTitleInput.value = note.title;
        editor.innerHTML = note.content;
        updateStats();
        saveStatus.textContent = 'Note loaded.';
    };

    // 6. Create a new note
    const createNewNote = () => {
        const newNote = {
            id: generateId(),
            title: "New Note",
            content: "",
            updatedAt: new Date().toISOString()
        };
        
        allNotes.unshift(newNote);
        saveNotesToLocal();
        renderNoteList();
        loadNote(newNote.id);
    };

    // 7. Delete a note
    const deleteNote = (noteId, noteTitle) => {
        if (!confirm(`Are you sure you want to delete "${noteTitle || 'Untitled Note'}"? This cannot be undone.`)) {
            return;
        }
        
        allNotes = allNotes.filter(n => n.id !== noteId);
        saveNotesToLocal();
        renderNoteList();
        
        if (currentNoteId === noteId) {
            currentNoteId = null;
            noteTitleInput.value = '';
            editor.innerHTML = '';
            updateStats();
            saveStatus.textContent = 'Note deleted.';
        }
    };
    
    // 8. Save Note (Debounced)
    const saveNote = () => {
        if (!currentNoteId) return;
        
        const noteIndex = allNotes.findIndex(n => n.id === currentNoteId);
        if (noteIndex === -1) return;
        
        const updatedNote = {
            ...allNotes[noteIndex],
            title: noteTitleInput.value || 'Untitled Note',
            content: editor.innerHTML,
            updatedAt: new Date().toISOString()
        };
        
        allNotes[noteIndex] = updatedNote;
        allNotes.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));
        
        saveNotesToLocal();
        
        renderNoteList();
        const activeEl = document.querySelector(`.note-list-item[data-id="${currentNoteId}"]`);
        if (activeEl) activeEl.classList.add('active');
    };
    const debouncedSave = debounce(saveNote, 1500);

    // 9. Update Stats
    const updateStats = () => {
        const text = editor.innerText || '';
        const charCount = text.length;
        const wordCount = text.trim().split(/\s+/).filter(word => word.length > 0).length;
        
        charCountEl.textContent = `Characters: ${charCount}`;
        wordCountEl.textContent = `Words: ${wordCount === 1 && charCount === 0 ? 0 : wordCount}`;
    };

    // 10. Filter Notes List
    const filterNotes = () => {
        const query = searchInput.value.toLowerCase();
        
        noteListContainer.innerHTML = '';
        const filteredNotes = allNotes.filter(note => 
            note.title.toLowerCase().includes(query) || 
            (note.content || "").replace(/<[^>]+>/g, ' ').toLowerCase().includes(query)
        );
        
        if(filteredNotes.length === 0) {
            noteListContainer.innerHTML = '<p style="padding: 1rem; text-align: center; color: #888;">No notes found.</p>';
        } else {
            filteredNotes.forEach(renderNoteInList);
        }
        
        if(currentNoteId) {
            const activeEl = document.querySelector(`.note-list-item[data-id="${currentNoteId}"]`);
            if (activeEl) activeEl.classList.add('active');
        }
    };
    
    // 11. Download/Export (TXT, HTML, PDF)
    const setupDownloadButtons = () => {
        // TXT
        document.getElementById('save-txt-btn').addEventListener('click', () => {
            const textContent = `${noteTitleInput.value}\n\n${editor.innerText}`;
            const blob = new Blob([textContent], { type: 'text/plain' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `${(noteTitleInput.value || 'note').replace(/[\/\\?%*:|"<>]/g, '-')}.txt`;
            a.click();
            URL.revokeObjectURL(a.href);
        });
        
        // HTML
        document.getElementById('save-html-btn').addEventListener('click', () => {
            const htmlContent = `<h1>${noteTitleInput.value}</h1>${editor.innerHTML}`;
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = `${(noteTitleInput.value || 'note').replace(/[\/\\?%*:|"<>]/g, '-')}.html`;
            a.click();
            URL.revokeObjectURL(a.href);
        });
        
        // PDF
        savePdfBtn.addEventListener('click', () => {
            const title = noteTitleInput.value || 'note';
            const contentToPrint = document.createElement('div');
            const printTitle = document.createElement('h1');
            printTitle.textContent = title;
            const printBody = document.createElement('div');
            printBody.innerHTML = editor.innerHTML;
            
            contentToPrint.style.padding = "15px";
            contentToPrint.style.width = "210mm";
            contentToPrint.style.fontFamily = "Poppins, sans-serif";
            contentToPrint.style.color = getComputedStyle(editor).color;
            
            contentToPrint.appendChild(printTitle);
            contentToPrint.appendChild(printBody);
            
            document.body.appendChild(contentToPrint);

            saveStatus.textContent = 'Generating PDF...';

            html2canvas(contentToPrint, {
                scale: 2,
                backgroundColor: getComputedStyle(editor).backgroundColor
            }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
                
                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                pdf.save(`${title.replace(/[\/\\?%*:|"<>]/g, '-')}.pdf`);
                
                document.body.removeChild(contentToPrint);
                saveStatus.textContent = 'PDF downloaded.';
            }).catch(err => {
                console.error("PDF generation failed:", err);
                saveStatus.textContent = 'PDF failed.';
                document.body.removeChild(contentToPrint);
            });
        });
    };
    
    // 12. Toolbar Logic
    const setupToolbar = () => {
        // This query finds all buttons with a 'data-command'
        document.querySelectorAll('.toolbar-button[data-command]').forEach(button => {
            button.addEventListener('click', () => {
                let command = button.dataset.command;
                let value = button.dataset.value;

                if (command === 'formatBlock' && value) {
                    document.execCommand(command, false, value);
                } else if (command) {
                    // This now handles bold, italic, undo, redo, etc.
                    document.execCommand(command, false, null);
                }
                editor.focus();
            });
        });
        
        document.getElementById('format-block-select').addEventListener('change', (e) => {
            document.execCommand('formatBlock', false, e.target.value);
            editor.focus();
        });
        
        document.getElementById('create-link-btn').addEventListener('click', () => {
            const url = prompt('Enter the URL:', 'https://');
            if (url) {
                document.execCommand('createLink', false, url);
            }
            editor.focus();
        });
        
        // Font Color Picker
        fontColorPicker.addEventListener('change', (e) => {
            document.execCommand('foreColor', false, e.target.value);
            editor.focus();
        });
        
        
        editor.addEventListener('keyup', updateToolbarState);
        editor.addEventListener('mouseup', updateToolbarState);
    };
    
    const updateToolbarState = () => {
        document.querySelectorAll('.toolbar-button[data-command]').forEach(button => {
            const command = button.dataset.command;
            if (document.queryCommandState(command)) {
                button.classList.add('active');
            } else {
                button.classList.remove('active');
            }
        });
        
        const blockType = document.queryCommandValue('formatBlock');
        const select = document.getElementById('format-block-select');
        if (['h1', 'h2', 'h3', 'p'].includes(blockType)) {
            select.value = blockType;
        } else {
            select.value = 'p';
        }
        
        const color = document.queryCommandValue('foreColor');
        try {
            const hexColor = (color.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/)) ? 
                "#" + ("0" + parseInt(RegExp.$1,10).toString(16)).slice(-2) +
                      ("0" + parseInt(RegExp.$2,10).toString(16)).slice(-2) +
                      ("0" + parseInt(RegExp.$3,10).toString(16)).slice(-2) : color;
            fontColorPicker.value = hexColor;
        } catch(e) {
            fontColorPicker.value = '#172b4d';
        }
    };
    
    // Image helper function removed

    // 13. Attach all event listeners for the app
    const addAppEventListeners = () => {
        newNoteBtn.addEventListener('click', createNewNote);
        searchInput.addEventListener('keyup', filterNotes);
        
        editor.addEventListener('input', () => {
            updateStats();
            debouncedSave();
        });
        noteTitleInput.addEventListener('input', () => {
            debouncedSave();
        });
        
        setupToolbar();
        setupDownloadButtons();
        
        // Drag, drop, and paste listeners removed
    };

    // --- Main Initialization ---
    loadNotesFromLocal();
    renderNoteList();
    addAppEventListeners();
    
    if (allNotes.length > 0) {
        loadNote(allNotes[0].id);
    }
});
</script>
</body>
</html>
